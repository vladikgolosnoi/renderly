| РўСЂРµР±РѕРІР°РЅРёРµ (РўР— / РґРѕРї.РєСЂРёС‚РµСЂРёРё) | Р“РґРµ СЂРµР°Р»РёР·РѕРІР°РЅРѕ | РљР°Рє РїСЂРѕРІРµСЂРёС‚СЊ |
| --- | --- | --- |
| Р“РёР±РєР°СЏ Р°СЂС…РёС‚РµРєС‚СѓСЂР° Р±Р»РѕРєРѕРІ, РІРѕР·РјРѕР¶РЅРѕСЃС‚СЊ РґРѕР±Р°РІР»СЏС‚СЊ РЅРѕРІС‹Рµ С‚РёРїС‹ | `apps/api/app/models/block_definition.py`, `app/seeds/block_definitions.json`, `app/services/block_registry.py` | Р”РѕР±Р°РІРёС‚СЊ Р·Р°РїРёСЃСЊ РІ `block_definitions.json`, РІС‹РїРѕР»РЅРёС‚СЊ `python -m app.seeds.seed_data`, РїСЂРѕРІРµСЂРёС‚СЊ `/api/catalog/blocks` |
| Drag & drop / РІРёР·СѓР°Р»СЊРЅС‹Р№ СЂРµРґР°РєС‚РѕСЂ Р±Р»РѕРєРѕРІ | `apps/web/src/views/EditorView.vue`, РєРѕРјРїРѕРЅРµРЅС‚С‹ `BlockPalette.vue`, `EditorCanvas.vue`, `BlockForm.vue`, store `project.ts` | Р—Р°РїСѓСЃС‚РёС‚СЊ С„СЂРѕРЅС‚, РѕС‚РєСЂС‹С‚СЊ СЂРµРґР°РєС‚РѕСЂ, РґРѕР±Р°РІРёС‚СЊ Р±Р»РѕРє, РёР·РјРµРЅРёС‚СЊ РїРѕР»СЏ в†’ РїСЂРµРґРїСЂРѕСЃРјРѕС‚СЂ РѕР±РЅРѕРІРёС‚СЃСЏ |
| РџСѓР±Р»РёРєР°С†РёСЏ / СЌРєСЃРїРѕСЂС‚ HTML | `apps/api/app/api/routes/publish.py`, `app/services/publisher.py`, РјРѕРґРµР»СЊ `PublishedVersion` | POST `/api/projects/{id}/publish`, Р·Р°С‚РµРј GET `/api/projects/{id}/published/latest` Рё СѓР±РµРґРёС‚СЊСЃСЏ, С‡С‚Рѕ html СЃРѕРґРµСЂР¶РёС‚ Р±Р»РѕРєРё |
| Header/Footer РєРѕРЅС„РёРіСѓСЂР°С†РёСЏ, С‚РµРјР° РїСЂРѕРµРєС‚Р° | `Project.settings/theme`, seeds, РіРµРЅРµСЂР°С‚РѕСЂ HTML | Р’ РґРµРјРѕ-РїСЂРѕРµРєС‚Рµ РёР·РјРµРЅРёС‚СЊ `settings.footer_text` С‡РµСЂРµР· API/СЂРµРґР°РєС‚РѕСЂ, РѕРїСѓР±Р»РёРєРѕРІР°С‚СЊ в†’ С‚РµРєСЃС‚ РІ html РѕР±РЅРѕРІРёС‚СЃСЏ |
| Р РµРґР°РєС‚РѕСЂ С‚РµРј + СЃРѕС…СЂР°РЅРµРЅРёРµ С€Р°Р±Р»РѕРЅРѕРІ | `apps/web/src/components/ThemeDesigner.vue`, `src/stores/project.ts`, `apps/api/app/api/routes/themes.py`, РјРёРіСЂР°С†РёСЏ `20251108_02` | Р’ СЂРµРґР°РєС‚РѕСЂРµ РёР·РјРµРЅРёС‚СЊ С†РІРµС‚Р°, СЃРѕС…СЂР°РЅРёС‚СЊ С€Р°Р±Р»РѕРЅ в†’ РѕРЅ РїРѕСЏРІРёС‚СЃСЏ РІ РІС‹РїР°РґР°СЋС‰РµРј СЃРїРёСЃРєРµ Рё РІ `GET /api/themes`; РїСЂРёРјРµРЅРёС‚Рµ С€Р°Р±Р»РѕРЅ Рє РґСЂСѓРіРѕРјСѓ РїСЂРѕРµРєС‚Сѓ |
| РђРґРјРёРЅ-CRUD Р±Р»РѕРєРѕРІ | `apps/api/app/api/routes/catalog.py` (POST/PUT/DELETE + admin guard), `apps/web/src/views/BlockAdminView.vue`, `src/stores/blockAdmin.ts` | РђРІС‚РѕСЂРёР·РѕРІР°С‚СЊСЃСЏ РїРѕРґ `admin@renderly.dev`, РѕС‚РєСЂС‹С‚СЊ `/admin/blocks`, СЃРѕР·РґР°С‚СЊ Р±Р»РѕРє Рё СѓР±РµРґРёС‚СЊСЃСЏ С‡С‚Рѕ РѕРЅ РїРѕСЏРІР»СЏРµС‚СЃСЏ РІ `/api/catalog/blocks`; РїРѕРїС‹С‚РєР° РїРѕРґ РѕР±С‹С‡РЅС‹Рј РїРѕР»СЊР·РѕРІР°С‚РµР»РµРј РІРѕР·РІСЂР°С‰Р°РµС‚ 403 |
| Р­РєСЃРїРѕСЂС‚/РёРјРїРѕСЂС‚ РїСЂРѕРµРєС‚Р° (JSON) | `apps/api/app/api/routes/projects.py` (`/export`, `/import`), `app/services/publisher.py:snapshot_project` | `GET /api/projects/{id}/export` в†’ JSON; Р·Р°С‚РµРј `POST /api/projects/import` СЃ РѕС‚РІРµС‚РѕРј Рё СѓР±РµРґРёС‚СЊСЃСЏ, С‡С‚Рѕ РїСЂРѕРµРєС‚ РїРѕСЏРІРёР»СЃСЏ Рё СЃРѕРґРµСЂР¶РёС‚ С‚Рѕ Р¶Рµ С‡РёСЃР»Рѕ Р±Р»РѕРєРѕРІ |
| РџСѓР±Р»РёРєР°С†РёСЏ РІ CDN (MinIO) | `apps/api/app/services/cdn.py`, `services/publisher.py`, `app/api/routes/publish.py`, `infra/docker-compose.yml` | Р—Р°РїСѓСЃС‚РёС‚СЊ `docker compose up`, РІС‹РїРѕР»РЅРёС‚СЊ `POST /api/projects/{id}/publish` в†’ РІ РѕС‚РІРµС‚Рµ `publication.cdn_url`; РѕС‚РєСЂС‹С‚СЊ URL, С‡С‚РѕР±С‹ СѓРІРёРґРµС‚СЊ HTML |
| Live preview С‡РµСЂРµР· SSR | `apps/api/app/api/routes/publish.py` (`/preview`), `apps/web/src/components/LivePreview.vue` | Р’ СЂРµРґР°РєС‚РѕСЂРµ РёР·РјРµРЅСЏС‚СЊ Р±Р»РѕРєРё, РЅР°Р±Р»СЋРґР°С‚СЊ РѕР±РЅРѕРІР»РµРЅРёРµ РІ iframe; С‚Р°РєР¶Рµ РјРѕР¶РЅРѕ РІС‹Р·РІР°С‚СЊ `POST /api/projects/{id}/preview` Рё СѓР±РµРґРёС‚СЊСЃСЏ, С‡С‚Рѕ `PublishedVersion` РЅРµ РґРѕР±Р°РІР»СЏРµС‚СЃСЏ |
| РЎРѕРІРјРµСЃС‚РЅР°СЏ СЂР°Р±РѕС‚Р° Рё СЃС‚Р°С‚СѓСЃС‹ РІРёРґРёРјРѕСЃС‚Рё | `apps/api/app/models/project.py`, `app/api/routes/projects.py` (`/members`), `app/services/access.py`, `apps/web/src/views/ProjectSettings.vue`, `apps/web/src/stores/project.ts`, С‚РµСЃС‚С‹ `apps/api/tests/test_projects.py`, `apps/web/src/stores/project.spec.ts` | Р’Р»Р°РґРµР»СЊС†РµРј РѕС‚РєСЂС‹С‚СЊ `/projects/{id}/settings`, РґРѕР±Р°РІРёС‚СЊ СѓС‡Р°СЃС‚РЅРёРєР° РїРѕ email в†’ РІС‚РѕСЂРѕР№ РїРѕР»СЊР·РѕРІР°С‚РµР»СЊ РІРёРґРёС‚ РїСЂРѕРµРєС‚ РІ `/api/projects`, РјРѕР¶РµС‚ СЂРµРґР°РєС‚РёСЂРѕРІР°С‚СЊ Р±Р»РѕРєРё, РЅРѕ `POST /api/projects/{id}/publish` РІРѕР·РІСЂР°С‰Р°РµС‚ 403; СЃС‚РѕСЂРѕРЅРЅРёР№ Р°РєРєР°СѓРЅС‚ РїРѕР»СѓС‡Р°РµС‚ 404 |
| Telemetry & Р°СѓРґРёС‚ РєР»СЋС‡РµРІС‹С… РґРµР№СЃС‚РІРёР№ | `apps/api/app/models/audit_event.py`, `app/services/audit.py`, `app/api/routes/audit.py`, middleware РІ `app/main.py`, С‚РµСЃС‚ `apps/api/tests/test_projects.py::test_publish_creates_audit_event` | РЎРѕР·РґР°С‚СЊ РїСЂРѕРµРєС‚ Рё РѕРїСѓР±Р»РёРєРѕРІР°С‚СЊ в†’ `GET /api/audit/project/{id}` РІРѕР·РІСЂР°С‰Р°РµС‚ СЃРѕР±С‹С‚РёРµ `project.publish`, Р° stdout Р»РѕРі СЃРѕРґРµСЂР¶РёС‚ СЃС‚СЂРѕРєРё `renderly.audit` |
| Р¤РѕСЂРјР° РѕР±СЂР°С‚РЅРѕР№ СЃРІСЏР·Рё Рё Р°РЅР°Р»РёС‚РёРєР° | `apps/api/app/seeds/block_definitions.json` (Р±Р»РѕРє `form`), `app/models/form_submission.py`, `app/api/routes/forms.py`, `app/services/forms.py`, С‚РµСЃС‚ `apps/api/tests/test_forms.py` | Р”РѕР±Р°РІРёС‚СЊ Р±Р»РѕРє `form`, Р·Р°С‚РµРј РІС‹Р·РІР°С‚СЊ `POST /api/forms/submit` СЃ `project_id`, `block_id`, `data` в†’ Р·Р°РїРёСЃСЊ РїРѕСЏРІР»СЏРµС‚СЃСЏ РІ С‚Р°Р±Р»РёС†Рµ `formsubmission`, СЃС‚Р°С‚СѓСЃ `delivered`, Р»РѕРіРіРµСЂ `renderly.forms` С„РёРєСЃРёСЂСѓРµС‚ РѕС‚РїСЂР°РІРєСѓ |
| CI/CD РїР°Р№РїР»Р°Р№РЅ (GitHub Actions) | `.github/workflows/ci.yml`, `scripts/check.sh`, README (Р±РµР№РґР¶ CI) | Р—Р°РїСѓС€РёС‚СЊ РёР·РјРµРЅРµРЅРёСЏ РёР»Рё Р·Р°РїСѓСЃС‚РёС‚СЊ workflow РІСЂСѓС‡РЅСѓСЋ в†’ РІ Р»РѕРіРµ РІРёРґРЅРѕ С€Р°РіРё matrix (Python 3.12, Node 22), СЃР±РѕСЂРєСѓ Docker-РѕР±СЂР°Р·РѕРІ, Р°СЂС‚РµС„Р°РєС‚ `coverage/`; Р±РµР№РґР¶ РІ README РїРѕРєР°Р·С‹РІР°РµС‚ СЃС‚Р°С‚СѓСЃ |
| РђРІС‚РѕСЂРёР·Р°С†РёСЏ / Р»РёС‡РЅС‹Р№ РєР°Р±РёРЅРµС‚ | `auth` СЂРѕСѓС‚С‹, `useAuthStore`, middleware axios | Р’РѕР№С‚Рё `demo@renderly.dev`, СѓР±РµРґРёС‚СЊСЃСЏ, С‡С‚Рѕ Р·Р°РїСЂРѕСЃС‹ РѕС‚РїСЂР°РІР»СЏСЋС‚СЃСЏ СЃ JWT |
| Р”РѕРєРµСЂРёР·Р°С†РёСЏ Рё РµРґРёРЅР°СЏ РєРѕРјР°РЅРґР° Р·Р°РїСѓСЃРєР° | `.env.example`, `infra/docker-compose.yml`, `apps/api/Dockerfile`, `apps/web/Dockerfile` | `cp .env.example .env && cd infra && docker compose up -d` |
| РњРёРіСЂР°С†РёРё + seeds | `apps/api/migrations`, `app/seeds/seed_data.py`, `Makefile seed` | `docker compose exec api alembic upgrade head` + `python -m app.seeds.seed_data`, РїСЂРѕРІРµСЂРёС‚СЊ РЅР°Р»РёС‡РёРµ Р±Р»РѕРєРѕРІ |
| РўРµСЃС‚С‹ (smoke/api/ui) | `apps/api/tests`, `apps/web/src/components/__tests__`, `scripts/check.sh` | `make test` РёР»Рё `./scripts/check.sh` |
| Health-checkРё | `apps/api/app/api/routes/health.py`, README | `curl http://localhost:8000/api/healthz` |
| Р”РѕРєСѓРјРµРЅС‚Р°С†РёСЏ (README/ARCHITECTURE/TASKLIST/PROMPTS) | РЎРѕРѕС‚РІРµС‚СЃС‚РІСѓСЋС‰РёРµ С„Р°Р№Р»С‹ РІ РєРѕСЂРЅРµ | РџСЂРѕСЃРјРѕС‚СЂРµС‚СЊ С„Р°Р№Р»С‹, СѓР±РµРґРёС‚СЊСЃСЏ С‡С‚Рѕ РїРѕРєСЂС‹РІР°СЋС‚ С‚СЂРµР±РѕРІР°РЅРёСЏ |
| РђРЅР°Р»РёС‚РёРєР° Р»РёРґРѕРІ Рё РєРѕРЅРІРµСЂСЃРёР№ | pps/api/app/api/routes/analytics.py, pp/schemas/analytics.py, pps/web/src/views/AnalyticsView.vue, pps/web/src/views/__tests__/AnalyticsView.spec.ts | Р’С‹Р·РІР°С‚СЊ GET /api/analytics/leads?project_id=... РїРѕСЃР»Рµ СЃРѕР·РґР°РЅРёСЏ СЃР°Р±РјРёС‚РѕРІ С„РѕСЂРј в†’ summary Рё timeseries РІРєР»СЋС‡Р°СЋС‚ РїСЂРѕРµРєС‚; РЅР° С„СЂРѕРЅС‚Рµ /analytics РѕС‚РѕР±СЂР°Р¶Р°РµС‚ РіСЂР°С„РёРє Рё С‚Р°Р±Р»РёС†Сѓ. |
| РћС‡РµСЂРµРґСЊ Рё СЂРµС‚СЂР°Рё webhook'РѕРІ | pps/api/app/services/forms.py, pp/core/tasks.py, pp/worker.py, infra/docker-compose.yml, РјРёРіСЂР°С†РёСЏ 20251108_07_webhook_queue.py, С‚РµСЃС‚С‹ pps/api/tests/test_forms.py | РћСЃС‚Р°РІРёС‚СЊ С„РѕСЂРјСѓ Р±РµР· webhook Рё РґРѕР¶РґР°С‚СЊСЃСЏ СЃС‚Р°С‚СѓСЃР° failed РІ /api/analytics/leads Рё С‚Р°Р±Р»РёС†Рµ ormsubmission; Р·Р°С‚РµРј РІС‹Р·РІР°С‚СЊ POST /api/forms/{id}/replay Рё СѓР±РµРґРёС‚СЊСЃСЏ, С‡С‚Рѕ Р·Р°РїРёСЃСЊ РІРѕР·РІСЂР°С‰Р°РµС‚СЃСЏ РІ РѕС‡РµСЂРµРґСЊ Рё РїРѕСЃР»Рµ РѕР±СЂР°Р±РѕС‚РєРё СЃС‚Р°РЅРѕРІРёС‚СЃСЏ sent. |
| РњР°СЂРєРµС‚РїР»РµР№СЃ С€Р°Р±Р»РѕРЅРѕРІ (Р°РґР°РїС‚Р°С†РёСЏ С„Р°РєСѓР»СЊС‚РµС‚РѕРІ) | `apps/api/app/api/routes/templates.py`, `apps/api/app/models/community_template.py`, `apps/web/src/stores/project.ts`, `apps/web/src/views/MarketplaceView.vue`, `apps/web/src/views/ProjectSettings.vue` | UI `/marketplace` РїРѕРєР°Р·С‹РІР°РµС‚ СЃРїРёСЃРѕРє С€Р°Р±Р»РѕРЅРѕРІ, РїСѓР±Р»РёРєР°С†РёСЏ РґРѕСЃС‚СѓРїРЅР° РёР· Project Settings; Vitest `MarketplaceView.spec.ts` Рё pytest `test_templates.py` РїСЂРѕРІРµСЂСЏСЋС‚ РёРјРїРѕСЂС‚/Р·Р°РїСЂРµС‚ РїСЂРёРІР°С‚РЅС‹С… РїСЂРѕРµРєС‚РѕРІ. |
| Мультиязычность лендингов | `apps/api/app/api/routes/projects.py`, `apps/api/app/services/publisher.py`, `apps/api/app/services/localization.py`, `apps/web/src/stores/project.ts`, `apps/web/src/components/LocaleSwitcher.vue`, `apps/web/src/views/EditorView.vue` | Locale Switcher управляет списком языков, блоки сохраняют `translations`, preview/publish принимают `?lang=xx`; тесты `test_preview_falls_back_to_default_locale` и Vitest покрывают UI. |

| Публикация на кастомные домены | `apps/api/app/models/project_domain.py`, `apps/api/app/api/routes/projects.py`, `apps/api/app/api/routes/publish.py`, `apps/api/app/services/domain_manager.py`, `infra/docker-compose.yml`, `apps/web/src/views/ProjectSettings.vue` | Добавление домена, DNS-валидация через domain-manager, публикация создаёт объект `domains/<host>/index.html`, интерфейс показывает статус и токен, README описывает настройку DNS. |

| Менеджер ассетов и галерея | pps/api/app/services/assets.py, pps/api/app/api/routes/assets.py, pps/web/src/components/AssetManager.vue, pps/web/src/stores/project.ts | POST/GET /api/assets загружает изображения/видео в MinIO c лимитом, генерирует thumbnail и выдаёт URL; в редакторе AssetManager позволяет скопировать ссылку; pytest 	est_assets.py мокает MinIO. |

